CREATE USER c##JIWOO IDENTIFIED BY JIWOO;
GRANT CONNECT, RESOURCE TO c##JIWOO;
ALTER USER C##JIWOO DEFAULT TABLESPACE USERS QUOTA UNLIMITED ON USERS;
--------------------------------------------------------------------------------
CREATE TABLE TEACHER (
    TEACHER_ID NUMBER PRIMARY KEY,
    NAME VARCHAR(20) NOT NULL,
    EMAIL VARCHAR(50) UNIQUE NOT NULL,
    HIRE_DATE DATE DEFAULT SYSDATE,
    SUBJECT VARCHAR2(30)
);

COMMENT ON COLUMN TEACHER.TEACHER_ID IS '강사 고유번호';
COMMENT ON COLUMN TEACHER.NAME IS '강사 이름';
COMMENT ON COLUMN TEACHER.EMAIL IS '이메일';
COMMENT ON COLUMN TEACHER.HIRE_DATE IS '입사일';
COMMENT ON COLUMN TEACHER.SUBJECT IS '전공분야';

INSERT INTO TEACHER 
    VALUES(01, '김춘배', 'kimcb@gmail.com', DEFAULT, 'java');
INSERT INTO TEACHER 
    VALUES(02, '박길용', 'parkky@gmail.com', DEFAULT, 'java script');
INSERT INTO TEACHER 
    VALUES(03, '천룡인', 'cheonri@gmail.com', DEFAULT, 'python');
INSERT INTO TEACHER 
    VALUES(04, '전갑수', 'jeongs@gmail.com', DEFAULT, 'C+');
INSERT INTO TEACHER 
    VALUES(05, '황천길', 'hwangcg@gmail.com', DEFAULT, 'C++');
    
--------------------------------------------------------------------------------
CREATE TABLE LECTURE (
    LECTURE_ID NUMBER PRIMARY KEY,
    TITLE VARCHAR2(30) NOT NULL,
    TEACHER_ID NUMBER REFERENCES TEACHER(TEACHER_ID) ON DELETE CASCADE,
    INDEX_COUNT NUMBER DEFAULT 0,
    CATEGORY VARCHAR2(20),
    START_DATE DATE,
    END_DATE DATE
);

COMMENT ON COLUMN LECTURE.LECTURE_ID IS '수강기록 고유번호';
COMMENT ON COLUMN LECTURE.TITLE IS '강의제목';
COMMENT ON COLUMN LECTURE.TEACHER_ID IS '강의 담당 강사의ID';
COMMENT ON COLUMN LECTURE.INDEX_COUNT IS '수강인원';
COMMENT ON COLUMN LECTURE.CATEGORY IS '강의분류';
COMMENT ON COLUMN LECTURE.START_DATE IS '강의 시작일';
COMMENT ON COLUMN LECTURE.END_DATE IS '강의 종료일';

INSERT INTO LECTURE
    VALUES(101, '강의1', 03, 8, 'Java', null, null);
INSERT INTO LECTURE
    VALUES(102, '강의2', 01, 10, 'SQL', null, null);
INSERT INTO LECTURE
    VALUES(103, '강의3', 03, 7, 'DataBase', null, null);
INSERT INTO LECTURE
    VALUES(104, '강의4', 05, 5, 'SQL', null, null);
INSERT INTO LECTURE
    VALUES(105, '강의5', 04, 5, 'Java', null, null);
        
--------------------------------------------------------------------------------
CREATE TABLE STUDENT(
    STUDENT_ID NUMBER PRIMARY KEY,
    NAME VARCHAR(20),
    GRADE NUMBER,
    EMAIL VARCHAR2(50),
    JOIN_DATE DATE
);

COMMENT ON COLUMN STUDENT.STUDENT_ID IS '수강생 고유번호';
COMMENT ON COLUMN STUDENT.NAME IS '수강생 이름';
COMMENT ON COLUMN STUDENT.GRADE IS '학년 또는 수강 등급';
COMMENT ON COLUMN STUDENT.EMAIL IS '수강생 이메일';
COMMENT ON COLUMN STUDENT.JOIN_DATE IS '등록일';

INSERT INTO STUDENT
    VALUES(1001, '김민준', 1, 'kimmj@naver.com', null);
INSERT INTO STUDENT
    VALUES(1002, '최윤아', 1, 'choiya@naver.com', null);
INSERT INTO STUDENT
    VALUES(1003, '박세훈', 1, 'parksh@naver.com', null);    
INSERT INTO STUDENT
    VALUES(1004, '이세빈', 1, 'leesb@naver.com', null);    
INSERT INTO STUDENT
    VALUES(1005, '곽민재', 1, 'gwakmj@naver.com', null);   
INSERT INTO STUDENT
    VALUES(1006, '김준식', 1, 'kimjs@naver.com', null);
INSERT INTO STUDENT
    VALUES(1007, '이준현', 1, 'leejh@naver.com', null);    
INSERT INTO STUDENT
    VALUES(1008, '윤여준', 1, 'yoonyj@naver.com', null);    
    
--------------------------------------------------------------------------------
CREATE TABLE ENROLLMENT(
    ENROLL_ID NUMBER PRIMARY KEY,
    STUDENT_ID NUMBER REFERENCES STUDENT(STUDENT_ID) ON DELETE CASCADE,
    LECTURE_ID NUMBER REFERENCES LECTURE(LECTURE_ID) ON DELETE CASCADE,
    ENROLL_DATE DATE,
    STATUS CHAR(1) CHECK(STATUS IN ('Y', 'N')),
    GRADE_SCORE NUMBER
);

COMMENT ON COLUMN ENROLLMENT.ENROLL_ID IS '수강기록 고유번호';
COMMENT ON COLUMN ENROLLMENT.STUDENT_ID IS '수강생 ID';
COMMENT ON COLUMN ENROLLMENT.LECTURE_ID IS '강의 ID';
COMMENT ON COLUMN ENROLLMENT.ENROLL_DATE IS '수강 등록일';
COMMENT ON COLUMN ENROLLMENT.STATUS IS '수강 상태';
COMMENT ON COLUMN ENROLLMENT.GRADE_SCORE IS '성적 점수';

INSERT INTO ENROLLMENT
    VALUES(501, 1001, 102, NULL, 'Y', 100);
INSERT INTO ENROLLMENT
    VALUES(502, 1002, 101, NULL, 'Y', 75);
INSERT INTO ENROLLMENT
    VALUES(503, 1005, 105, NULL, 'N', 90);
INSERT INTO ENROLLMENT
    VALUES(504, 1003, 105, NULL, 'Y', 65);
INSERT INTO ENROLLMENT
    VALUES(505, 1002, 103, NULL, 'Y', 50);
INSERT INTO ENROLLMENT
    VALUES(506, 1004, 104, NULL, 'Y', 100);
INSERT INTO ENROLLMENT
    VALUES(507, 1006, 102, NULL, 'Y', 95);
INSERT INTO ENROLLMENT
    VALUES(508, 1003, 104, NULL, 'N', 70);
INSERT INTO ENROLLMENT
    VALUES(509, 1007, 101, NULL, 'Y', 80);    
INSERT INTO ENROLLMENT
    VALUES(510, 1005, 101, NULL, 'Y', 30);    
INSERT INTO ENROLLMENT
    VALUES(511, 1008, 105, NULL, 'Y', 70);    
INSERT INTO ENROLLMENT
    VALUES(512, 1005, 103, NULL, 'N', 85);    
INSERT INTO ENROLLMENT
    VALUES(513, 1001, 102, NULL, 'Y', 90);
INSERT INTO ENROLLMENT
    VALUES(514, 1001, 101, NULL, 'N', 85);