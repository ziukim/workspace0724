<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="MemberMapper">
	<!-- resultMap : 조회된 resultSet의 결과를 특정 객체에 맵핑할 맵핑정보를 기술하는 것 -->
	<resultMap id="memberResultMap" type="Member">
		<result column="MEMBER_NO" property="memberNo"/>
		<result column="MEMBER_ID" property="memberId"/>
		<result column="MEMBER_PWD" property="memberPwd"/>
		<result column="MEMBER_NAME" property="memberName"/>
		<result column="PHONE" property="phone"/>
		<result column="EMAIL" property="email"/>
		<result column="ADDRESS" property="address"/>
		<result column="INTEREST" property="interest"/>
		<result column="ENROLL_DATE" property="enrollDate"/>
		<result column="MODIFY_DATE" property="modifyDate"/>
		<result column="STATUS" property="status"/>
	</resultMap>
	<!-- 
		select문 사용시
		<select id="sql문 식별자" resultType="결과타입(별칭)" | resultMap="직접맵핑한resultMap의 id"
		  select문 (select * from Blog where id = #{id})
		</select>
	 -->
	 <select id="loginMember" parameterType="hashmap" resultMap="memberResultMap">
		 SELECT MEMBER_NO,
				MEMBER_ID,
				MEMBER_PWD,
				MEMBER_NAME,
				PHONE,
				EMAIL,
				ADDRESS,
				INTEREST,
				ENROLL_DATE,
				MODIFY_DATE,
				STATUS
			FROM MEMBER
		   WHERE MEMBER_ID = #{memberId}
		     AND MEMBER_PWD = #{memberPwd}
		     AND STATUS = 'Y'
	 </select>
	 <select id="idCheck" parameterType="string" resultType="_int">
		 SELECT COUNT(*) AS "COUNT"
		  FROM MEMBER
		 WHERE MEMBER_ID = #{checkId}
	 </select>
	 <insert id="insertMember" parameterType="Member">
	 	INSERT INTO MEMBER
		(
			MEMBER_NO,
			MEMBER_ID,
			MEMBER_PWD,
			MEMBER_NAME,
			PHONE,
			EMAIL,
			ADDRESS,
			INTEREST
		)
		VALUES(
			SEQ_MNO.NEXTVAL, 
			#{memberId}, 
			#{memberPwd}, 
			#{memberName}, 
			#{phone}, 
			#{email}, 
			#{address}, 
			#{interest}
		)
	 </insert>
</mapper>