<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
	<entry key="selectAllBoardCount">
		SELECT COUNT(*) AS COUNT
		FROM BOARD
		WHERE BOARD_TYPE = 1
		  AND STATUS = 'Y'
	</entry>
	<entry key="selectAllBoard">
		SELECT *
		FROM(SELECT ROWNUM RNUM, A.* 
		     FROM (SELECT  BOARD_NO, 
		                CATEGORY_NAME,
		                BOARD_TITLE,
		                MEMBER_ID,
		                COUNT,
		                TO_CHAR(CREATE_DATE, 'YYYY-MM-DD') AS "CREATE_DATE"
		        FROM BOARD B
		        JOIN CATEGORY USING(CATEGORY_NO)
		        JOIN MEMBER M ON(BOARD_WRITER = MEMBER_NO)
		        WHERE B.STATUS = 'Y'
		        AND BOARD_TYPE = 1
		        ORDER BY BOARD_NO DESC) A
		    )
		WHERE RNUM BETWEEN ? AND ?
	</entry>
	<entry key="increaseCount">
		UPDATE BOARD
		   SET COUNT = COUNT + 1
		 WHERE BOARD_NO = ?
		   AND STATUS = 'Y'
	</entry>
	<entry key="selectBoardByBoardNo">
		SELECT BOARD_NO,
				CATEGORY_NAME,
				CATEGORY_NO,
				BOARD_TITLE,
				BOARD_CONTENT,
				MEMBER_ID,
				TO_CHAR(CREATE_DATE, 'YYYY-MM-DD') AS "CREATE_DATE"
		FROM BOARD B
		LEFT JOIN CATEGORY USING(CATEGORY_NO)
		JOIN MEMBER M ON(BOARD_WRITER = MEMBER_NO)
		WHERE B.STATUS = 'Y'
		AND BOARD_NO = ?
	</entry>
	<entry key="selectAllCategory">
		SELECT CATEGORY_NO,
				CATEGORY_NAME
		FROM CATEGORY
	</entry>	
	<entry key="updateBoard">
		UPDATE BOARD
		   SET CATEGORY_NO = ?,
				BOARD_TITLE = ?,
				BOARD_CONTENT = ?
		 WHERE BOARD_NO = ?
		   AND STATUS = 'Y'
	</entry>
	<entry key="insertBoard">
		INSERT
		INTO BOARD(
			BOARD_NO,
			BOARD_TYPE,
			CATEGORY_NO,
			BOARD_TITLE,
			BOARD_CONTENT,
			BOARD_WRITER
		) VALUES(
			SEQ_BNO.NEXTVAL,
			?,
			?,
			?,
			?,
			?
		)
	</entry>
	<entry key="insertAttachment">
		INSERT
		INTO ATTACHMENT(
			FILE_NO,
			REF_BNO,
			ORIGIN_NAME,
			CHANGE_NAME,
			FILE_PATH
		) VALUES(
			SEQ_FNO.NEXTVAL,
			SEQ_BNO.CURRVAL,
			?,
			?,
			?
		)
	</entry>
	<entry key="insertThumbnailAttachment">
		INSERT
		INTO ATTACHMENT(
			FILE_NO,
			REF_BNO,
			ORIGIN_NAME,
			CHANGE_NAME,
			FILE_PATH,
			FILE_LEVEL
		) VALUES(
			SEQ_FNO.NEXTVAL,
			SEQ_BNO.CURRVAL,
			?,
			?,
			?,
			?
		)
	</entry>
	<entry key="insertNewAttachment">
		INSERT
		INTO ATTACHMENT(
			FILE_NO,
			REF_BNO,
			ORIGIN_NAME,
			CHANGE_NAME,
			FILE_PATH
		) VALUES(
			SEQ_FNO.NEXTVAL,
			?,
			?,
			?,
			?
		)
	</entry>
	<entry key="updateAttachment">
		UPDATE ATTACHMENT
		   SET 	ORIGIN_NAME = ?,
				CHANGE_NAME = ?,
				FILE_PATH = ?
		 WHERE FILE_NO = ?
	</entry>
	<entry key="selectAttachment">
		SELECT FILE_NO,
				ORIGIN_NAME,
				CHANGE_NAME,
				FILE_PATH,
				FILE_LEVEL
		  FROM ATTACHMENT
		 WHERE REF_BNO = ?
	</entry>	
	<entry key="insertReply">
		INSERT
		INTO REPLY(
			REPLY_NO,
			REPLY_CONTENT,
			REF_BNO,
			REPLY_WRITER
		) VALUES(
			SEQ_RNO.NEXTVAL,
			?,
			?,
			?
		)
	</entry>
	<entry key="deleteReply">
		DELETE 
		FROM REPLY
		WHERE REPLY_NO = ?
	</entry>
	<entry key="selectReplyByBoardNo">
		SELECT REPLY_NO,
				REPLY_CONTENT,
				MEMBER_ID,
				TO_CHAR(CREATE_DATE, 'YYYY-MM-DD HH:MI') AS CREATE_DATE
		  FROM REPLY R
		  JOIN MEMBER M ON(REPLY_WRITER = MEMBER_NO)
		 WHERE R.STATUS = 'Y'
		   AND REF_BNO = ?
		 ORDER BY REPLY_NO DESC
	</entry>
	<entry key="selectThumbnailList">
		SELECT  BOARD_NO, 
                BOARD_TITLE,
                COUNT,
           		FILE_PATH || CHANGE_NAME AS "THUMBNAIL_IMG"
        FROM BOARD B
        JOIN ATTACHMENT A ON(BOARD_NO = REF_BNO)
        WHERE B.STATUS = 'Y'
          AND BOARD_TYPE = 2
          AND FILE_LEVEL = 1
        ORDER BY BOARD_NO DESC
	</entry>
</properties>
